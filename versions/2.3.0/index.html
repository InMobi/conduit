<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.3 at Jul 8, 2014 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Conduit - Overview</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20140708" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                Conduit
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
            
                <div class="xleft">
        <span id="publishDate">Last Published: 2014-07-08</span>
                  &nbsp;| <span id="projectVersion">Version: 2.3.0</span>
                          |                           <a href="http://github.com/inmobi/" class="externalLink" title="InMobi">InMobi</a>
        &gt;
                          <a href="http://github.com/inmobi/conduit" class="externalLink" title="Conduit">Conduit</a>
        &gt;
    Overview
              </div>
            <div class="xright">        
            
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
            
                                <h5>Conduit</h5>
                  <ul>
                  <li class="none">
            <strong>Conduit</strong>
          </li>
                  <li class="none">
                          <a href="developer/Overview.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="developer/Design.html" title="Design">Design</a>
            </li>
                  <li class="none">
                          <a href="DevSetup/DevSetup.html" title="Dev setup">Dev setup</a>
            </li>
                  <li class="none">
                          <a href="ConduitLite/ConduitLite.html" title="ConduitLite">ConduitLite</a>
            </li>
                  <li class="none">
                          <a href="Audit/Audit.html" title="Audit">Audit</a>
            </li>
                  <li class="none">
                          <a href="Visualization/Visualization.html" title="Visualization">Visualization</a>
            </li>
                  <li class="none">
                          <a href="Admin/AdminScript.html" title="Admin Script">Admin Script</a>
            </li>
                  <li class="none">
                          <a href="Monitoring/MonitoringConduit.html" title="Monitoring">Monitoring</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                          <li class="expanded">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                    <ul>
                      <li class="none">
            <strong>About</strong>
          </li>
                      <li class="none">
                          <a href="source-repository.html" title="Source Repository">Source Repository</a>
            </li>
                      <li class="none">
                          <a href="issue-tracking.html" title="Issue Tracking">Issue Tracking</a>
            </li>
                      <li class="none">
                          <a href="integration.html" title="Continuous Integration">Continuous Integration</a>
            </li>
                      <li class="none">
                          <a href="modules.html" title="Project Modules">Project Modules</a>
            </li>
                      <li class="none">
                          <a href="project-summary.html" title="Project Summary">Project Summary</a>
            </li>
                      <li class="none">
                          <a href="dependencies.html" title="Dependencies">Dependencies</a>
            </li>
              </ul>
        </li>
                                                                    <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                                                                                                                                     <a href="http://www.inmobi.com/" title="inmobi" class="poweredBy">
        <img class="poweredBy"  alt="inmobi" src="../images/inmobi-logo.jpg"     />
      </a>
                       
            
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <p>Data collection is the starting point of Big Data lifecycle capture, curate, store, analyze and visualize.</p><p>Data is generated by online serving systems. This could be multiple kind of events. This data is used for different Business applications like Reporting, Business Intelligence, Machine learning, real-time Analytics, and real-time feedback loops.</p><p>A system to collect the huge number of events data from online systems, making that available as real-time stream to consumers in a seamless fashion.</p><div class="section"><h2>Background<a name="Background"></a></h2><p>Earlier we are using an Rsync based file push mechanism to transfer data directly to the consuming system.</p><p>The granularity of files was minute. Every minute, data gets collected from online systems and get pushed to one or a set of machines. Further, these machines upload the data to HDFS. This was a very simple solution and worked well for long time, when data volumes were less and the number of consuming systems was few.</p><p>The data volumes grew and the online serving systems span across multiple geographies. The data consumers also became very demanding in nature with complex and disparate needs. The consumer systems could be different Hadoop grids, HBase, the real-time consumers like fraud detection systems, streaming analytics systems etc.</p><p>The point to point minutely file push model from producers to end consumers started having lot of trouble. No easy way to monitor or control the flow, if WAN links become flaky, huge backlog builds on producer machines. As the systems were very tightly coupled, any addition of new consumer would require a configuration change on the producer boxes.</p><p>All destinations IP addresses need to be known on producer machines. Often the operations team managing the producer systems and consumer systems are different, so became very difficult to manage this. There were lot of operability challenges like if a box on which the Rsync is pushing the file is down, and then data flow can get choked. No easy visibility in late arriving events.</p><p>This was also expensive on infrastructure. If more than one consumer in a remote data-center requires the same data stream, there would be lot of WAN bandwidth wastage for duplicate data transfers.</p></div><div class="section"><h2>Conduit was born<a name="Conduit_was_born"></a></h2><p>What we were looking for was a data collection system. We defined certain goals and characteristics of this system:</p><p>- Decouples producers and consumers. Consumer need not know about the producer systems at all and vice versa.</p><p>- Reliable and highly scalable</p><p>- Suits both batch as well as low latency streaming consumers. No different data paths. Should be Map-Reduce friendly</p><p>- Allows consumers to process the data at their own pace</p><p>- Efficient: no duplicate data transfers, uses compression</p><p>- Works with distributed producers over WAN, with consumers sitting in local or remote datacenters.</p></div><div class="section"><h2>Batch Consumption<a name="Batch_Consumption"></a></h2><p>Data is published in the minute directories in HDFS for a given topic. A topic has three views for the consumers local, merged and mirror.</p></div><div class="section"><h2>Local view<a name="Local_view"></a></h2><p>Local view only has data collected within the same datacenter.</p></div><div class="section"><h2>Merge view<a name="Merge_view"></a></h2><p>Merged view has data collected from all the data-centers. Merge view is not configured by default for all topics. It is configured on demand in a cluster co-located with the consumer application.</p></div><div class="section"><h2>Mirror view<a name="Mirror_view"></a></h2><p>Merge view can also be replicated in other clusters, which is called a mirror. Mirror stream can be used for BCP purpose.</p><p>The data is published in HDFS in minute directories as [topicName]/yyyy/MM/dd/HH/mm This layout enables consumer systems (could be workflows) to consume data at different granularities.</p><p>The latencies from the time an event is generated to the time it is available for consumption varies between 2 minutes to 5 minutes depending on the view I.e. Local, merge and mirror.</p></div><div class="section"><h2>Streaming consumption:<a name="Streaming_consumption:"></a></h2><p>There is a streaming library called PinTail via which events can be streamed out of HDFS as they arrive. It has got much lower latencies of less than 10 seconds. </p></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2014
                        <a href="https://github.com/InMobi">InMobi</a>.
            All Rights Reserved.      
            
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
